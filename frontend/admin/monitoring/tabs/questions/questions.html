<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questions Management</title>
</head>
<body>
    <div class="questions-container">
        <!-- Header with action buttons -->
        <div class="questions-header">
            <h2>Questions Management</h2>
            <div class="header-actions">
                <button onclick="window.showAddQuestionModal()" class="btn btn-primary">Add Question</button>
                <button onclick="window.importQuestions()" class="btn btn-secondary">Import CSV</button>
                <button onclick="window.exportQuestions()" class="btn btn-secondary">Export CSV</button>
            </div>
        </div>

        <!-- Stats Cards - Above filters -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Questions</h3>
                <div class="stat-value" id="totalQuestions">0</div>
            </div>
            <div class="stat-card">
                <h3>Active Questions</h3>
                <div class="stat-value" id="activeQuestions">0</div>
            </div>
            <div class="stat-card">
                <h3>Flagged Questions</h3>
                <div class="stat-value" id="flaggedQuestions">0</div>
            </div>
            <div class="stat-card">
                <h3>Custom Questions</h3>
                <div class="stat-value" id="customQuestions">0</div>
            </div>
        </div>

        <!-- Filters Section -->
        <div class="filters-section">
            <h3>Filters</h3>
            <div class="filters-grid">
                <div class="filter-group">
                    <label for="searchInput">Search</label>
                    <input type="text" id="searchInput" placeholder="Search questions..." onkeypress="if(event.key==='Enter') window.loadQuestions()">
                </div>
                
                <div class="filter-group">
                    <label for="categoryFilter">Category</label>
                    <select id="categoryFilter" class="filter-select">
                        <option value="">All Categories</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="difficultyFilter">Difficulty</label>
                    <select id="difficultyFilter" class="filter-select">
                        <option value="">All Difficulties</option>
                        <option value="easy">Easy</option>
                        <option value="medium">Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="statusFilter">Status</label>
                    <select id="statusFilter" class="filter-select">
                        <option value="">All Status</option>
                        <option value="active">Active</option>
                        <option value="flagged">Flagged</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
            </div>
            <div class="filter-actions">
                <button onclick="window.clearFilters()" class="btn btn-secondary">Clear</button>
                <button onclick="window.loadQuestions()" class="btn btn-primary">Search</button>
            </div>
        </div>

        <!-- Table -->
        <div class="table-wrapper">
            <table class="questions-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Question</th>
                        <th>Answer</th>
                        <th>Category</th>
                        <th>Difficulty</th>
                        <th>Usage</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="questionsTableBody">
                    <tr>
                        <td colspan="8" class="loading-cell">Loading questions...</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination-wrapper">
            <div class="pagination-info">
                <span id="paginationInfo">Showing 0 of 0 questions</span>
            </div>
            <div class="pagination-controls" id="paginationControls">
                <!-- Pagination buttons will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Add/Edit Question Modal -->
    <div id="addQuestionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Add New Question</h3>
                <button class="modal-close" onclick="window.closeModal('addQuestionModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="questionForm" onsubmit="window.saveQuestion(event)">
                    <input type="hidden" id="questionId" value="">
                    
                    <div class="form-group">
                        <label for="questionText">Question Text *</label>
                        <textarea id="questionText" name="question_text" rows="3" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="correctAnswer">Correct Answer *</label>
                        <input type="text" id="correctAnswer" name="correct_answer" required>
                    </div>

                    <div class="form-group">
                        <label for="incorrectAnswer1">Incorrect Answer 1 *</label>
                        <input type="text" id="incorrectAnswer1" name="incorrect_answer_1" required>
                    </div>

                    <div class="form-group">
                        <label for="incorrectAnswer2">Incorrect Answer 2 *</label>
                        <input type="text" id="incorrectAnswer2" name="incorrect_answer_2" required>
                    </div>

                    <div class="form-group">
                        <label for="incorrectAnswer3">Incorrect Answer 3 *</label>
                        <input type="text" id="incorrectAnswer3" name="incorrect_answer_3" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="category">Category *</label>
                            <select id="category" name="category" required>
                                <option value="">Select Category</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="difficulty">Difficulty *</label>
                            <select id="difficulty" name="difficulty" required>
                                <option value="">Select Difficulty</option>
                                <option value="easy">Easy</option>
                                <option value="medium">Medium</option>
                                <option value="hard">Hard</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" onclick="window.closeModal('addQuestionModal')" class="btn btn-secondary">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Question</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Import CSV Modal -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Import Questions from CSV</h3>
                <button class="modal-close" onclick="window.closeModal('importModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-instructions">
                    <p>Upload a CSV file with the following columns:</p>
                    <ul>
                        <li>question</li>
                        <li>correct_answer</li>
                        <li>incorrect_answer_1</li>
                        <li>incorrect_answer_2</li>
                        <li>incorrect_answer_3</li>
                        <li>category</li>
                        <li>difficulty (easy/medium/hard)</li>
                    </ul>
                    <button type="button" onclick="window.downloadTemplate()" class="btn btn-secondary">Download Template</button>
                </div>
                <form id="importForm" onsubmit="window.handleImport(event)">
                    <div class="form-group">
                        <label for="csvFile">Select CSV File</label>
                        <input type="file" id="csvFile" name="file" accept=".csv" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" onclick="window.closeModal('importModal')" class="btn btn-secondary">Cancel</button>
                        <button type="submit" class="btn btn-primary">Import</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Export CSV Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Export Questions to CSV</h3>
                <button class="modal-close" onclick="window.closeModal('exportModal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>Select filters to export specific questions:</p>
                <form id="exportForm" onsubmit="window.handleExport(event)">
                    <div class="form-group">
                        <label for="exportCategory">Category</label>
                        <select id="exportCategory" name="category">
                            <option value="">All Categories</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="exportDifficulty">Difficulty</label>
                        <select id="exportDifficulty" name="difficulty">
                            <option value="">All Difficulties</option>
                            <option value="easy">Easy</option>
                            <option value="medium">Medium</option>
                            <option value="hard">Hard</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="exportStatus">Status</label>
                        <select id="exportStatus" name="status">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="flagged">Flagged</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" onclick="window.closeModal('exportModal')" class="btn btn-secondary">Cancel</button>
                        <button type="submit" class="btn btn-primary">Export</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
